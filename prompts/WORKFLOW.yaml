# =====================================
# ğŸ’¾ WORKFLOW.yaml
# =====================================
#
# ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—çŠ¶æ³ãƒ»æ±ºå®šäº‹é …ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’è¨˜éŒ²ã™ã‚‹ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã€‚
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’AIã«æ¸¡ã™ã“ã¨ã§ã€å‰å›ã®ç¶šãã‹ã‚‰é–‹ç™ºã‚’å†é–‹ã§ãã‚‹ã€‚
#
# ã€é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã€‘
# - SYSTEM_PROMPT.yaml - é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»AIã®æŒ¯ã‚‹èˆã„
# - PROJECT.yaml - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ãƒ»APIè¨­è¨ˆ
# - DATABASE.md - ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
# - SETUP.md - ç’°å¢ƒæ§‹ç¯‰æ‰‹é †
#
# =====================================

workflow:
  version: "1.0"
  last_updated: "2026-01-10"

  # =====================================
  # å‰å›ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚µãƒãƒªãƒ¼
  # =====================================

  last_session_summary: |
    ã€ä»Šå›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚„ã£ãŸã“ã¨ã€‘
    1. åŸºç›¤å®Ÿè£…å®Œäº†
       - src/lib/supabase/client.tsï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰
       - src/lib/supabase/server.tsï¼ˆã‚µãƒ¼ãƒãƒ¼ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰
       - src/lib/line/client.tsï¼ˆLINE SDKãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰
       - src/types/index.tsï¼ˆå‹å®šç¾©ï¼‰
       - Supabaseæ¥ç¶šãƒ†ã‚¹ãƒˆï¼ˆ/api/healthï¼‰

    2. å…¨APIå®Ÿè£…å®Œäº†
       - åº—èˆ—ç®¡ç†APIï¼ˆ/api/storesï¼‰
       - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†APIï¼ˆ/api/templatesï¼‰
       - åª’ä½“ç®¡ç†APIï¼ˆ/api/mediaï¼‰
       - åº—èˆ—Ã—åª’ä½“URLç®¡ç†APIï¼ˆ/api/store-media-urlsï¼‰
       - ä¸€æ‹¬é…ä¿¡APIï¼ˆ/api/broadcast/createï¼‰
       - é…ä¿¡å±¥æ­´APIï¼ˆ/api/broadcast/jobsï¼‰

    ã€æ¬¡å›ãƒªã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã®ãƒã‚¤ãƒ³ãƒˆã€‘
    - shadcn/uiåˆæœŸåŒ–ã‹ã‚‰é–‹å§‹
    - ãã®å¾Œã€ç®¡ç†ç”»é¢ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã®å®Ÿè£…ã¸

  # =====================================
  # 1. å®Ÿè£…ä¸­ãƒ»è¨ˆç”»ä¸­ã®æ©Ÿèƒ½
  # =====================================

  features:
    completed:
      - id: "F001"
        name: "åŸºç›¤å®Ÿè£…"
        status: "completed"
        completed_at: "2026-01-10"
        description: "Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€LINE SDKãƒ©ãƒƒãƒ‘ãƒ¼ã€å‹å®šç¾©ã®ä½œæˆ"

      - id: "F002"
        name: "åº—èˆ—ç®¡ç†API"
        status: "completed"
        completed_at: "2026-01-10"
        endpoints:
          - "GET /api/stores"
          - "POST /api/stores"
          - "GET /api/stores/[id]"
          - "PUT /api/stores/[id]"
          - "DELETE /api/stores/[id]"

      - id: "F003"
        name: "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†API"
        status: "completed"
        completed_at: "2026-01-10"
        endpoints:
          - "GET /api/templates"
          - "POST /api/templates"
          - "GET /api/templates/[id]"
          - "PUT /api/templates/[id]"
          - "DELETE /api/templates/[id]"

      - id: "F004"
        name: "åª’ä½“ç®¡ç†API"
        status: "completed"
        completed_at: "2026-01-10"
        endpoints:
          - "GET /api/media"
          - "POST /api/media"
          - "DELETE /api/media/[id]"

      - id: "F005"
        name: "åº—èˆ—Ã—åª’ä½“URLç®¡ç†API"
        status: "completed"
        completed_at: "2026-01-10"
        endpoints:
          - "GET /api/store-media-urls"
          - "POST /api/store-media-urls"
          - "DELETE /api/store-media-urls/[id]"

      - id: "F006"
        name: "ä¸€æ‹¬é…ä¿¡API"
        status: "completed"
        completed_at: "2026-01-10"
        endpoints:
          - "POST /api/broadcast/create"
          - "GET /api/broadcast/jobs"
          - "GET /api/broadcast/jobs/[id]"

    in_progress: []

    planned:
      - id: "F007"
        name: "ç®¡ç†ç”»é¢ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰"
        status: "planned"
        priority: 1
        description: "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€å„ç®¡ç†ç”»é¢ã®å®Ÿè£…"
        screens:
          - "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ/ï¼‰"
          - "åº—èˆ—ç®¡ç†ï¼ˆ/storesï¼‰"
          - "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ï¼ˆ/templatesï¼‰"
          - "åª’ä½“ç®¡ç†ï¼ˆ/mediaï¼‰"
          - "åº—èˆ—Ã—åª’ä½“URLï¼ˆ/store-media-urlsï¼‰"
          - "é…ä¿¡ä½œæˆï¼ˆ/broadcastï¼‰"

  # =====================================
  # 2. æ±ºå®šäº‹é …ã®è¨˜éŒ²
  # =====================================

  decisions:
    adopted:
      - id: "D000"
        idea: "é£²é£Ÿåº—LINEé‹ç”¨åŠ¹ç‡åŒ–ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™º"
        reason: "è¤‡æ•°åº—èˆ—ã¸ã®Flex Messageé…ä¿¡ã®æ‰‹ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã—ã€å·¥æ•°å‰Šæ¸›ãƒ»ãƒŸã‚¹é˜²æ­¢ã‚’å®Ÿç¾"
        date: "2026-01-09"

      - id: "D001"
        idea: "Next.js v14ã‚’ä½¿ç”¨ï¼ˆv16ã¯ESLintä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ã®ãŸã‚ï¼‰"
        reason: "create-next-app@16ã§npmã®ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ"
        date: "2026-01-09"

      - id: "D002"
        idea: "ESLintãªã—ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼ˆ--no-eslintï¼‰"
        reason: "eslint-config-nextã®ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ã‚’å›é¿"
        date: "2026-01-09"

      - id: "D003"
        idea: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯line-tool"
        reason: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¸Œæœ›"
        date: "2026-01-09"

      - id: "D004"
        idea: "Supabaseãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¯ Northeast Asia (Tokyo)"
        reason: "æ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æœ€å°åŒ–"
        date: "2026-01-09"

      - id: "D005"
        idea: "ãƒ•ã‚§ãƒ¼ã‚º1ã¯RLSãªã—"
        reason: "ç®¡ç†è€…ã®ã¿ä½¿ç”¨ã®ãŸã‚ã€ãƒ•ã‚§ãƒ¼ã‚º2ã§èªè¨¼è¿½åŠ æ™‚ã«RLSæœ‰åŠ¹åŒ–"
        date: "2026-01-09"

      - id: "D006"
        idea: "ãƒ•ã‚§ãƒ¼ã‚º1ã¯Flex Messageä¸€æ‹¬é…ä¿¡ã«é›†ä¸­ï¼ˆMVPï¼‰"
        reason: "ã¾ãšå·¥æ•°å‰Šæ¸›ã®ä¾¡å€¤ã‚’å®Ÿç¾ã—ã¦ã‹ã‚‰æ‹¡å¼µ"
        date: "2026-01-09"

      - id: "D007"
        idea: "é…ä¿¡ãƒ•ãƒ­ãƒ¼ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆâ†’åº—èˆ—é¸æŠâ†’åª’ä½“é¸æŠâ†’ä¸€æ‹¬ç”Ÿæˆ"
        reason: "Flex Message Simulatorã§ä½œã£ãŸJSONã‚’ãã®ã¾ã¾ä½¿ãˆã‚‹"
        date: "2026-01-09"

      - id: "D008"
        idea: "LINE SDKã®å‹ã‚¨ãƒ©ãƒ¼ã¯ä¸€æ—¦ç„¡è¦–"
        reason: "å®Ÿè¡Œæ™‚ã«ã¯å•é¡Œãªãå‹•ä½œã™ã‚‹ãŸã‚ã€é–‹ç™ºåŠ¹ç‡ã‚’å„ªå…ˆ"
        date: "2026-01-10"

    postponed:
      - id: "P001"
        idea: "ESLintå°å…¥"
        trigger: "å¿…è¦ã«ãªã£ãŸã‚‰å¾Œã‹ã‚‰è¿½åŠ "

      - id: "P002"
        idea: "shadcn/uiå°å…¥"
        trigger: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…é–‹å§‹æ™‚ï¼ˆæ¬¡å›ï¼‰"

      - id: "P003"
        idea: "Webhookå—ä¿¡æ©Ÿèƒ½"
        trigger: "ãƒ•ã‚§ãƒ¼ã‚º2é–‹å§‹æ™‚"

      - id: "P004"
        idea: "ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†æ©Ÿèƒ½"
        trigger: "ãƒ•ã‚§ãƒ¼ã‚º2é–‹å§‹æ™‚"

      - id: "P005"
        idea: "è‡ªå‹•å¿œç­”æ©Ÿèƒ½"
        trigger: "ãƒ•ã‚§ãƒ¼ã‚º2é–‹å§‹æ™‚"

      - id: "P006"
        idea: "ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé…ä¿¡ãƒ»åˆ†ææ©Ÿèƒ½"
        trigger: "ãƒ•ã‚§ãƒ¼ã‚º3é–‹å§‹æ™‚"

  # =====================================
  # 3. ç¾åœ¨ã®é€²æ—
  # =====================================

  progress:
    current_phase:
      id: "phase1"
      name: "Flex Messageä¸€æ‹¬é…ä¿¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆMVPï¼‰"
      status: "in_progress"

    current_step:
      name: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…"
      status: "not_started"
      description: "shadcn/uiå°å…¥ â†’ ç®¡ç†ç”»é¢å®Ÿè£…"

    completed_steps:
      - name: "ç’°å¢ƒæ§‹ç¯‰"
        completed_at: "2026-01-09"
        items:
          - "LINE Developersè¨­å®š"
          - "Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"
          - "Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ"
          - "ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
          - "ç’°å¢ƒå¤‰æ•°è¨­å®š"
          - "ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ç¢ºèª"

      - name: "åŸºç›¤å®Ÿè£…"
        completed_at: "2026-01-10"
        items:
          - "Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç”¨ãƒ»ã‚µãƒ¼ãƒãƒ¼ç”¨ï¼‰"
          - "LINE SDKãƒ©ãƒƒãƒ‘ãƒ¼"
          - "å‹å®šç¾©"
          - "æ¥ç¶šãƒ†ã‚¹ãƒˆ"

      - name: "APIå®Ÿè£…"
        completed_at: "2026-01-10"
        items:
          - "åº—èˆ—ç®¡ç†API"
          - "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†API"
          - "åª’ä½“ç®¡ç†API"
          - "åº—èˆ—Ã—åª’ä½“URLç®¡ç†API"
          - "ä¸€æ‹¬é…ä¿¡API"
          - "é…ä¿¡å±¥æ­´API"

    next_tasks:
      - "shadcn/uiåˆæœŸåŒ–"
      - "å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ"
      - "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢"
      - "åº—èˆ—ç®¡ç†ç”»é¢"
      - "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢"
      - "åª’ä½“ç®¡ç†ç”»é¢"
      - "é…ä¿¡ä½œæˆç”»é¢"

  # =====================================
  # 4. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆå‹‰å¼·ç”¨è§£èª¬ä»˜ãï¼‰
  # =====================================

  file_structure:
    current_tree: |
      line-tool/
      â”‚
      â”œâ”€â”€ ğŸ“„ .env.local
      â”‚   â””â”€â”€ ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGitç®¡ç†å¤–ï¼‰
      â”‚       Supabase URLã€APIã‚­ãƒ¼ã€LINEèªè¨¼æƒ…å ±ãªã©ã®ç§˜å¯†æƒ…å ±ã‚’ä¿å­˜
      â”‚       NEXT_PUBLIC_ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ = ãƒ–ãƒ©ã‚¦ã‚¶ã§ä½¿ãˆã‚‹
      â”‚       ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãªã— = ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã¿ï¼ˆå®‰å…¨ï¼‰
      â”‚
      â”œâ”€â”€ ğŸ“„ .gitignore
      â”‚   â””â”€â”€ Gitã§è¿½è·¡ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
      â”‚       node_modules/ã€.env.localã€.next/ ãªã©ã‚’æŒ‡å®š
      â”‚
      â”œâ”€â”€ ğŸ“„ next.config.ts
      â”‚   â””â”€â”€ Next.jsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
      â”‚       ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€ç’°å¢ƒå¤‰æ•°ã€ç”»åƒãƒ‰ãƒ¡ã‚¤ãƒ³ãªã©ã‚’è¨­å®š
      â”‚
      â”œâ”€â”€ ğŸ“„ package.json
      â”‚   â””â”€â”€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®šç¾©
      â”‚       npm install ã§ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸€è¦§
      â”‚       npm run dev / build / start ãªã©ã®ã‚³ãƒãƒ³ãƒ‰å®šç¾©
      â”‚
      â”œâ”€â”€ ğŸ“„ tsconfig.json
      â”‚   â””â”€â”€ TypeScriptã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
      â”‚       @/* ã®ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šãªã©
      â”‚
      â”œâ”€â”€ ğŸ“„ tailwind.config.ts
      â”‚   â””â”€â”€ Tailwind CSSã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
      â”‚       ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã€ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ãªã©
      â”‚
      â”œâ”€â”€ ğŸ“„ postcss.config.mjs
      â”‚   â””â”€â”€ PostCSSã®è¨­å®šï¼ˆTailwindãŒä½¿ã†ï¼‰
      â”‚
      â”œâ”€â”€ ğŸ“ prompts/
      â”‚   â””â”€â”€ AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆç”¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé¡
      â”‚   â”‚
      â”‚   â”œâ”€â”€ ğŸ“„ DATABASE.md
      â”‚   â”‚   â””â”€â”€ ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸
      â”‚   â”‚       DBã®è¨­è¨ˆã‚’è¨˜éŒ²ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ æ™‚ã¯å¿…ãšæ›´æ–°ï¼
      â”‚   â”‚
      â”‚   â”œâ”€â”€ ğŸ“„ WORKFLOW.yaml â† ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
      â”‚   â”‚   â””â”€â”€ é€²æ—ãƒ»æ±ºå®šäº‹é …ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
      â”‚   â”‚       ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å¿…ãšæ›´æ–°ï¼
      â”‚   â”‚
      â”‚   â”œâ”€â”€ ğŸ“„ SYSTEM_PROMPT.yaml
      â”‚   â”‚   â””â”€â”€ é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»AIã®æŒ¯ã‚‹èˆã„å®šç¾©
      â”‚   â”‚
      â”‚   â”œâ”€â”€ ğŸ“„ PROJECT.yaml
      â”‚   â”‚   â””â”€â”€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ãƒ»APIè¨­è¨ˆãƒ»ç”»é¢æ§‹æˆ
      â”‚   â”‚
      â”‚   â””â”€â”€ ğŸ“„ SETUP.md
      â”‚       â””â”€â”€ ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ï¼ˆå‚ç…§ç”¨ï¼‰
      â”‚
      â””â”€â”€ ğŸ“ src/
          â””â”€â”€ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æœ¬ä½“
          â”‚
          â”œâ”€â”€ ğŸ“ app/
          â”‚   â””â”€â”€ Next.js App Router ã®ãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
          â”‚       ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆãƒ•ã‚©ãƒ«ãƒ€æ§‹é€  = URLæ§‹é€ ï¼‰
          â”‚   â”‚
          â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx
          â”‚   â”‚   â””â”€â”€ ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆå…¨ãƒšãƒ¼ã‚¸å…±é€šã®HTMLæ§‹é€ ï¼‰
          â”‚   â”‚       <html><body>ã‚¿ã‚°ã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãªã©
          â”‚   â”‚
          â”‚   â”œâ”€â”€ ğŸ“„ page.tsx
          â”‚   â”‚   â””â”€â”€ ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ / ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸæ™‚ã®ç”»é¢ï¼‰
          â”‚   â”‚
          â”‚   â”œâ”€â”€ ğŸ“„ globals.css
          â”‚   â”‚   â””â”€â”€ ã‚°ãƒ­ãƒ¼ãƒãƒ«CSSï¼ˆTailwindã®@tailwindæŒ‡å®šãªã©ï¼‰
          â”‚   â”‚
          â”‚   â””â”€â”€ ğŸ“ api/
          â”‚       â””â”€â”€ APIãƒ«ãƒ¼ãƒˆï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
          â”‚           /api/xxx ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†
          â”‚       â”‚
          â”‚       â”œâ”€â”€ ğŸ“ health/
          â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
          â”‚       â”‚       â””â”€â”€ GET /api/health
          â”‚       â”‚           ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼†DBæ¥ç¶šç¢ºèªç”¨
          â”‚       â”‚
          â”‚       â”œâ”€â”€ ğŸ“ stores/
          â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
          â”‚       â”‚   â”‚   â””â”€â”€ GET /api/stores - åº—èˆ—ä¸€è¦§å–å¾—
          â”‚       â”‚   â”‚       POST /api/stores - åº—èˆ—æ–°è¦ç™»éŒ²
          â”‚       â”‚   â”‚
          â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
          â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
          â”‚       â”‚           â””â”€â”€ GET /api/stores/[id] - åº—èˆ—è©³ç´°å–å¾—
          â”‚       â”‚               PUT /api/stores/[id] - åº—èˆ—æ›´æ–°
          â”‚       â”‚               DELETE /api/stores/[id] - åº—èˆ—å‰Šé™¤
          â”‚       â”‚           â€» [id] = å‹•çš„ãƒ«ãƒ¼ãƒˆã€‚URLã®idãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹
          â”‚       â”‚
          â”‚       â”œâ”€â”€ ğŸ“ templates/
          â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
          â”‚       â”‚   â”‚   â””â”€â”€ GET/POST ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ãƒ»æ–°è¦ç™»éŒ²
          â”‚       â”‚   â”‚
          â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
          â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
          â”‚       â”‚           â””â”€â”€ GET/PUT/DELETE ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤
          â”‚       â”‚
          â”‚       â”œâ”€â”€ ğŸ“ media/
          â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
          â”‚       â”‚   â”‚   â””â”€â”€ GET/POST åª’ä½“ä¸€è¦§ãƒ»æ–°è¦ç™»éŒ²
          â”‚       â”‚   â”‚
          â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
          â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
          â”‚       â”‚           â””â”€â”€ DELETE åª’ä½“å‰Šé™¤
          â”‚       â”‚
          â”‚       â”œâ”€â”€ ğŸ“ store-media-urls/
          â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
          â”‚       â”‚   â”‚   â””â”€â”€ GET åº—èˆ—Ã—åª’ä½“URLä¸€è¦§ï¼ˆ?store_id=xxxã§ãƒ•ã‚£ãƒ«ã‚¿å¯ï¼‰
          â”‚       â”‚   â”‚       POST åº—èˆ—Ã—åª’ä½“URLç™»éŒ²ï¼ˆUPSERTï¼‰
          â”‚       â”‚   â”‚
          â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
          â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
          â”‚       â”‚           â””â”€â”€ DELETE åº—èˆ—Ã—åª’ä½“URLå‰Šé™¤
          â”‚       â”‚
          â”‚       â””â”€â”€ ğŸ“ broadcast/
          â”‚           â”œâ”€â”€ ğŸ“ create/
          â”‚           â”‚   â””â”€â”€ ğŸ“„ route.ts
          â”‚           â”‚       â””â”€â”€ POST /api/broadcast/create
          â”‚           â”‚           Flex Messageä¸€æ‹¬ç”Ÿæˆãƒ»é…ä¿¡ã®ãƒ¡ã‚¤ãƒ³å‡¦ç†ğŸ”¥
          â”‚           â”‚           ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®{{media_url}}ã‚’åº—èˆ—ã”ã¨ã«ç½®æ›ã—ã¦é…ä¿¡
          â”‚           â”‚
          â”‚           â””â”€â”€ ğŸ“ jobs/
          â”‚               â”œâ”€â”€ ğŸ“„ route.ts
          â”‚               â”‚   â””â”€â”€ GET /api/broadcast/jobs - é…ä¿¡å±¥æ­´ä¸€è¦§
          â”‚               â”‚
          â”‚               â””â”€â”€ ğŸ“ [id]/
          â”‚                   â””â”€â”€ ğŸ“„ route.ts
          â”‚                       â””â”€â”€ GET /api/broadcast/jobs/[id] - é…ä¿¡è©³ç´°
          â”‚
          â”œâ”€â”€ ğŸ“ lib/
          â”‚   â””â”€â”€ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
          â”‚       å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®æ¥ç¶šå‡¦ç†ãªã©ã‚’ã¾ã¨ã‚ã‚‹
          â”‚   â”‚
          â”‚   â”œâ”€â”€ ğŸ“ supabase/
          â”‚   â”‚   â”œâ”€â”€ ğŸ“„ client.ts
          â”‚   â”‚   â”‚   â””â”€â”€ ãƒ–ãƒ©ã‚¦ã‚¶ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
          â”‚   â”‚   â”‚       ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆuse clientï¼‰ã§ä½¿ã†
          â”‚   â”‚   â”‚       createBrowserClient()ã§ä½œæˆ
          â”‚   â”‚   â”‚
          â”‚   â”‚   â””â”€â”€ ğŸ“„ server.ts
          â”‚   â”‚       â””â”€â”€ ã‚µãƒ¼ãƒãƒ¼ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
          â”‚   â”‚           API Routeã€Server Componentã§ä½¿ã†
          â”‚   â”‚           createServerClient()ã§ä½œæˆ
          â”‚   â”‚           Cookieã®èª­ã¿æ›¸ãè¨­å®šã‚‚å«ã‚€
          â”‚   â”‚
          â”‚   â””â”€â”€ ğŸ“ line/
          â”‚       â””â”€â”€ ğŸ“„ client.ts
          â”‚           â””â”€â”€ LINE Messaging APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
          â”‚               createLineClient() - åº—èˆ—ã”ã¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ
          â”‚               pushFlexMessage() - ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«Flex Messageé€ä¿¡
          â”‚               broadcastFlexMessage() - å…¨å‹ã ã¡ã«Flex Messageé…ä¿¡
          â”‚               ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€X-Line-Request-Idãƒ­ã‚°å‡ºåŠ›ã‚‚å«ã‚€
          â”‚
          â””â”€â”€ ğŸ“ types/
              â””â”€â”€ ğŸ“„ index.ts
                  â””â”€â”€ TypeScriptå‹å®šç¾©
                      Store, Template, Media, StoreMediaUrl, BroadcastJob
                      - DBãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã—ãŸå‹
                      CreateStoreRequest, UpdateStoreRequest ãªã©
                      - APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹
                      ApiResponse<T> - å…±é€šãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹

    planned_additions: |
      ã€æ¬¡ã«è¿½åŠ äºˆå®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã€‘

      src/
      â”œâ”€â”€ ğŸ“ components/
      â”‚   â””â”€â”€ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç½®ãå ´
      â”‚   â”‚
      â”‚   â”œâ”€â”€ ğŸ“ ui/
      â”‚   â”‚   â””â”€â”€ shadcn/uiã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
      â”‚   â”‚       Button, Card, Dialog, Form, Input, Table ãªã©
      â”‚   â”‚       npx shadcn add xxx ã§è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
      â”‚   â”‚
      â”‚   â””â”€â”€ ğŸ“ layout/
      â”‚       â””â”€â”€ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç³»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
      â”‚           Header, Sidebar, Footer ãªã©
      â”‚
      â””â”€â”€ ğŸ“ app/
          â””â”€â”€ ğŸ“ (dashboard)/
              â””â”€â”€ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç³»ãƒšãƒ¼ã‚¸ã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°
                  () = Route Groupã€‚URLã«ã¯å½±éŸ¿ã—ãªã„
                  å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«ä½¿ã†
              â”‚
              â”œâ”€â”€ ğŸ“„ layout.tsx - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ç­‰ï¼‰
              â”œâ”€â”€ ğŸ“„ page.tsx - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒˆãƒƒãƒ—ï¼ˆ/ï¼‰
              â”œâ”€â”€ ğŸ“ stores/page.tsx - åº—èˆ—ç®¡ç†ç”»é¢ï¼ˆ/storesï¼‰
              â”œâ”€â”€ ğŸ“ templates/page.tsx - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢ï¼ˆ/templatesï¼‰
              â”œâ”€â”€ ğŸ“ media/page.tsx - åª’ä½“ç®¡ç†ç”»é¢ï¼ˆ/mediaï¼‰
              â”œâ”€â”€ ğŸ“ store-media-urls/page.tsx - åº—èˆ—Ã—åª’ä½“URLç”»é¢ï¼ˆ/store-media-urlsï¼‰
              â””â”€â”€ ğŸ“ broadcast/page.tsx - é…ä¿¡ä½œæˆç”»é¢ï¼ˆ/broadcastï¼‰

    files:
      - path: ".env.local"
        purpose: "ç’°å¢ƒå¤‰æ•°ï¼ˆSupabaseã€LINEèªè¨¼æƒ…å ±ï¼‰"
        note: "Gitç®¡ç†å¤–ã€æœ¬ç•ªã¯Vercelã§è¨­å®š"

      - path: "src/lib/supabase/client.ts"
        purpose: "ãƒ–ãƒ©ã‚¦ã‚¶ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"

      - path: "src/lib/supabase/server.ts"
        purpose: "ã‚µãƒ¼ãƒãƒ¼ç”¨Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"

      - path: "src/lib/line/client.ts"
        purpose: "LINE Messaging APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"

      - path: "src/types/index.ts"
        purpose: "TypeScriptå‹å®šç¾©"

      - path: "src/app/api/health/route.ts"
        purpose: "ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»DBæ¥ç¶šç¢ºèª"

      - path: "src/app/api/stores/route.ts"
        purpose: "åº—èˆ—ä¸€è¦§ãƒ»æ–°è¦ç™»éŒ²API"

      - path: "src/app/api/stores/[id]/route.ts"
        purpose: "åº—èˆ—è©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤API"

      - path: "src/app/api/templates/route.ts"
        purpose: "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ãƒ»æ–°è¦ç™»éŒ²API"

      - path: "src/app/api/templates/[id]/route.ts"
        purpose: "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤API"

      - path: "src/app/api/media/route.ts"
        purpose: "åª’ä½“ä¸€è¦§ãƒ»æ–°è¦ç™»éŒ²API"

      - path: "src/app/api/media/[id]/route.ts"
        purpose: "åª’ä½“å‰Šé™¤API"

      - path: "src/app/api/store-media-urls/route.ts"
        purpose: "åº—èˆ—Ã—åª’ä½“URLä¸€è¦§ãƒ»ç™»éŒ²API"

      - path: "src/app/api/store-media-urls/[id]/route.ts"
        purpose: "åº—èˆ—Ã—åª’ä½“URLå‰Šé™¤API"

      - path: "src/app/api/broadcast/create/route.ts"
        purpose: "ä¸€æ‹¬é…ä¿¡å®Ÿè¡ŒAPIï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰"

      - path: "src/app/api/broadcast/jobs/route.ts"
        purpose: "é…ä¿¡å±¥æ­´ä¸€è¦§API"

      - path: "src/app/api/broadcast/jobs/[id]/route.ts"
        purpose: "é…ä¿¡è©³ç´°API"

  # =====================================
  # 5. æ³¨æ„ç‚¹ãƒ»ãƒãƒã£ãŸã“ã¨
  # =====================================

  cautions:
    reminders:
      - "DBã«å¤‰æ›´ã‚’åŠ ãˆãŸã‚‰DATABASE.mdã‚’æ›´æ–°ã™ã‚‹"
      - "Channel Access Tokenã¯çµ¶å¯¾ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«éœ²å‡ºã•ã›ãªã„"
      - "ç’°å¢ƒå¤‰æ•°ã¯NEXT_PUBLIC_ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒã‚ã‚‹ã‚‚ã®ã ã‘ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ä½¿ç”¨å¯èƒ½"
      - "LINE APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«æ³¨æ„ï¼ˆãƒ—ãƒƒã‚·ãƒ¥: 2,000req/ç§’ï¼‰"
      - "Supabaseã®1000ä»¶åˆ¶é™ã«æ³¨æ„ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¿…è¦ï¼‰"
      - "ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã¯WORKFLOW.yamlã‚’å¿…ãšæ›´æ–°"
      - "[id]ãƒ•ã‚©ãƒ«ãƒ€åã¯è§’æ‹¬å¼§ã‚’å«ã‚ã‚‹ï¼ˆNext.jså‹•çš„ãƒ«ãƒ¼ãƒˆï¼‰"

    troubles_encountered:
      - issue: "create-next-app@16ã§ESLintä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼"
        solution: "create-next-app@14 + --no-eslint ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å›é¿"
        date: "2026-01-09"

      - issue: "npmã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ¨©é™ã‚¨ãƒ©ãƒ¼ï¼ˆEACCESï¼‰"
        solution: "sudo chown -R 501:20 ~/.npm ã§æ¨©é™ä¿®æ­£"
        date: "2026-01-09"

      - issue: "LINE SDK ã®å‹ã‚¨ãƒ©ãƒ¼ï¼ˆresult.xLineRequestIdï¼‰"
        solution: "å®Ÿè¡Œæ™‚ã«ã¯å•é¡Œãªã„ãŸã‚ä¸€æ—¦ç„¡è¦–ã€‚å¿…è¦ãªã‚‰å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã§å¯¾å¿œ"
        date: "2026-01-10"

  # =====================================
  # 6. ç’°å¢ƒæƒ…å ±
  # =====================================

  environment:
    local:
      node_version: "v18ä»¥ä¸Š"
      package_manager: "npm"
      dev_server: "http://localhost:3000"
      project_path: "~/Desktop/line-tool"

    services:
      supabase:
        region: "Northeast Asia (Tokyo)"
        tables_created: true
        tables:
          - "stores"
          - "templates"
          - "media"
          - "store_media_urls"
          - "broadcast_jobs"

      line:
        provider_created: true
        channel_created: true
        access_token_issued: true
        webhook_enabled: true
        response_message_disabled: true

      github:
        connected: false
        note: "æ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ãƒªãƒã‚¸ãƒˆãƒªä½œæˆãƒ»pushäºˆå®š"

      vercel:
        connected: false
        note: "ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«è¨­å®š"

  # =====================================
  # 7. æ›´æ–°å±¥æ­´
  # =====================================

  changelog:
    - date: "2026-01-09"
      changes:
        - "âœ… ç’°å¢ƒæ§‹ç¯‰å®Œäº†"
        - "ğŸ“ DATABASE.mdä½œæˆ"
        - "ğŸ“ WORKFLOW.yamlä½œæˆ"
        - "ğŸ“ SYSTEM_PROMPT.yamlä½œæˆ"
        - "ğŸ“ PROJECT.yamlä½œæˆ"

    - date: "2026-01-10"
      changes:
        - "âœ… åŸºç›¤å®Ÿè£…å®Œäº†ï¼ˆSupabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€LINE SDKãƒ©ãƒƒãƒ‘ãƒ¼ã€å‹å®šç¾©ï¼‰"
        - "âœ… Supabaseæ¥ç¶šãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆ/api/healthï¼‰"
        - "âœ… åº—èˆ—ç®¡ç†APIå®Œäº†ï¼ˆ/api/storesï¼‰"
        - "âœ… ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†APIå®Œäº†ï¼ˆ/api/templatesï¼‰"
        - "âœ… åª’ä½“ç®¡ç†APIå®Œäº†ï¼ˆ/api/mediaï¼‰"
        - "âœ… åº—èˆ—Ã—åª’ä½“URLç®¡ç†APIå®Œäº†ï¼ˆ/api/store-media-urlsï¼‰"
        - "âœ… ä¸€æ‹¬é…ä¿¡APIå®Œäº†ï¼ˆ/api/broadcast/createï¼‰"
        - "âœ… é…ä¿¡å±¥æ­´APIå®Œäº†ï¼ˆ/api/broadcast/jobsï¼‰"
        - "ğŸ“ WORKFLOW.yamlæ›´æ–°ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã«è©³ç´°è§£èª¬è¿½åŠ ï¼‰"